<!doctype html>
<html lang="{{ .Site.LanguageCode | default "es-es" }}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <title>
    {{- if .IsHome -}}
      {{- .Site.Title -}}
    {{- else -}}
      {{- .Title }} · {{ .Site.Title -}}
    {{- end -}}
  </title>

  {{- if .Description -}}
    <meta name="description" content="{{ .Description }}">
  {{- else if .Site.Params.description -}}
    <meta name="description" content="{{ .Site.Params.description }}">
  {{- end -}}

  {{- /* Canonical “real” */ -}}
  {{ partial "head/canonical.html" . }}

  {{- /* Robots: respeta front matter si lo usas */ -}}
  {{- with .Params.robots -}}
    <meta name="robots" content="{{ . }}">
  {{- else -}}
    <meta name="robots" content="index,follow">
  {{- end -}}

  {{- /* Open Graph básico */ -}}
  <meta property="og:site_name" content="{{ .Site.Title }}">
  <meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}">
  <meta property="og:title" content="{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }}{{ end }}">
  <meta property="og:url" content="{{ .Permalink }}">
  {{- with .Description -}}
    <meta property="og:description" content="{{ . }}">
  {{- end -}}

  {{- /* CSS (Pipes si existe assets/css/main.css, si no fallback a static/css/main.css) */ -}}
  {{- $css := resources.Get "css/main.css" -}}
  {{- if $css -}}
    {{- $css = $css | minify | fingerprint -}}
    <link rel="stylesheet" href="{{ $css.RelPermalink }}" integrity="{{ $css.Data.Integrity }}">
  {{- else -}}
    <link rel="stylesheet" href="{{ "css/main.css" | relURL }}">
  {{- end -}}

  {{- /* RSS */ -}}
  {{- with .OutputFormats.Get "RSS" -}}
    <link rel="alternate" type="application/rss+xml" title="{{ $.Site.Title }}" href="{{ .RelPermalink }}">
  {{- end -}}

  {{- /* Extra head hook opcional */ -}}
  {{- block "head_extra" . }}{{ end -}}
</head>

<body>
  {{- block "header" . -}}{{ end -}}

  <main>
    {{- block "main" . }}{{ end -}}
  </main>

  {{- block "footer" . -}}{{ end -}}

  {{- block "scripts" . }}{{ end -}}
</body>
</html>
