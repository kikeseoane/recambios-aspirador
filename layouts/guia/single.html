{{ define "main" }}
  {{ $db := site.Data.aspiradores }}
  {{ $key := .Params.guideKey }}

  {{/* Obtener globals.guias_genericas de forma segura (sin nil) */}}
  {{ $gg := "" }}
  {{ with $db }}
    {{ with .globals }}
      {{ with .guias_genericas }}
        {{ $gg = . }}
      {{ end }}
    {{ end }}
  {{ end }}

  {{/* Resolver guía: puede ser lista (tu YAML actual) o map (futuro) */}}
  {{ $g := "" }}

  {{ if $gg }}
    {{ if reflect.IsMap $gg }}
      {{ $g = index $gg $key }}
    {{ else if reflect.IsSlice $gg }}
      {{ range $it := $gg }}
        {{ if and (reflect.IsMap $it) (eq (index $it "key") $key) }}
          {{ $g = $it }}
        {{ end }}
      {{ end }}
    {{ end }}
  {{ end }}

  <h1>{{ .Title }}</h1>

  {{ if $g }}

    {{/* Caso A: lista de strings (tu YAML actual) */}}
    {{ if reflect.IsSlice $g }}
      <ul class="list">
        {{ range $g }}<li>{{ . }}</li>{{ end }}
      </ul>

    {{/* Caso B: objeto {title, bullets} (si migras en el futuro) */}}
    {{ else if reflect.IsMap $g }}
      {{ with (index $g "title") }}<p class="muted">{{ . }}</p>{{ end }}

      {{ $bullets := index $g "bullets" }}
      {{ if and $bullets (reflect.IsSlice $bullets) }}
        <ul class="list">
          {{ range $bullets }}<li>{{ . }}</li>{{ end }}
        </ul>
      {{ else }}
        <p class="muted">Contenido en preparaci�n.</p>
      {{ end }}

    {{ else }}
      <p class="muted">Contenido en preparaci�n.</p>
    {{ end }}

  {{ else }}
    <p class="muted">Contenido en preparaci�n.</p>
  {{ end }}
{{ end }}
